<html lang="en"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
    xmlns:c="http://java.sun.com/jsp/jstl/core">
<head>
	<link href="bootstrap/css/bootstrap.css" rel="stylesheet" type="text/css" />
	<script src="bootstrap/js/jquery.min.js"></script>
	<script type="text/javascript" src="bootstrap/js/bootstrap.js"></script>
	<script type="text/javascript" src="bootstrap/js/datepicker.min.js"></script>
	<link rel="stylesheet" href="bootstrap/css/datepicker.css"/>
	<title>JRuteros</title>
	<link rel="shortcut icon" href="/images/Solo chico2.ico" />
	<script> //Script para el datepicker
	    $(document).ready(function(){
	        var date_input=$('#registerForm\\:date'); 
	        var container=$('.bootstrap-iso form').length>0 ? $('.bootstrap-iso form').parent() : "body";
	        date_input.datepicker({
	            format: 'dd/mm/yyyy',
	            container: container,
	            todayHighlight: true,
	            autoclose: true,
	            endDate: new Date,
	            language:"es",
	            startView: 2,
	        })
	    })
	</script>
</head>
<body background="images/background.jpg">
	
	<nav class="navbar navbar-default">
	  <div class="container-fluid">
	    <div class="navbar-header">
	      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
	        <span class="sr-only">Toggle navigation</span>
	        <span class="icon-bar"></span>
	        <span class="icon-bar"></span>
	        <span class="icon-bar"></span>
	      </button>
	      
	      <a class="navbar-brand" href="index.xhtml">
	      	<img style="max-width:100px; margin-top: -7px;" src="images/icono navbar2.png"></img>
	      </a>
	    </div>
    	   	<c:choose>
    	   		<c:when test="${empty facesContext.getMessageList('loginForm:username')}">
    	   			<div class="form-group">
		    	   		<h:form id="loginForm" class="navbar-right navbar-form">
							<h:inputText id="username" value="#{loginBean.username}" class="form-control" a:placeholder="Nombre de Usuario"
		                           required="true" />			    		
		                    <h:inputSecret id="password" value="#{loginBean.password}" class="form-control" a:placeholder="Password"
		                           required="true" />
		                   	<h:commandButton value="Entrar" class="btn btn-default" action="#{loginBean.login}" />
			    		</h:form>
			    	</div>
		    	</c:when>
		    	<c:otherwise>
		    		<div class="form-group has-error">
			    		<h:form id="loginForm" class="navbar-right navbar-form">
							<h:inputText id="username" value="#{loginBean.username}" class="form-control" a:placeholder="Nombre de Usuario"
		                           required="true" />			    		
		                    <h:inputSecret id="password" value="#{loginBean.password}" class="form-control" a:placeholder="Password"
		                           required="true" />
		                   	<h:commandButton value="Entrar" class="btn btn-default" action="#{loginBean.login}" />
			    		</h:form>
		    		</div>
		    	</c:otherwise>
		    </c:choose>
	  </div><!-- /.container-fluid -->
	</nav>
	
	<div class="col-md-6">
	      <img src="images/Solo.png"></img>
	      <p>JRuteros es un proyecto creado para unir viajeros de todas partes.</p>
	      <p>Permite a sus usuarios encontrar, subir y compartir rutas al aire libre</p>
	</div>
	
	<div class="col-md-6">
		<h2>Registrarse</h2>
		<h:form id="registerForm">
            <table>
                <tr>
                    <td><h:inputText id="username" value="#{registerBean.username}" class="form-control" a:placeholder="Nombre de Usuario"
                            required="true" requiredMessage="Ingresar nombre de usuario" validatorMessage="Username debe ser mayor a 5 caracteres">
                            <f:validateLength minimum="5"/></h:inputText></td>
                    <td><h:message for="username" style="color:red" /></td>
                </tr>            
                <tr>
                    <td><h:inputText id="nombre" value="#{registerBean.nombre}" class="form-control" a:placeholder="Nombre"
                            required="true" requiredMessage="Ingresar nombre" /></td>
                    <td><h:message for="nombre" style="color:red" /></td>
                </tr>
                <tr>
                    <td><h:inputText id="apellido" value="#{registerBean.apellido}" class="form-control" a:placeholder="Apellido"
                            required="true" requiredMessage="Ingresar apellido" /></td>
                    <td><h:message for="apellido" style="color:red" /></td>
                </tr>
                <tr>
                    <td><h:inputText id="email" value="#{registerBean.email}" class="form-control" a:placeholder="E-Mail"
                            required="true" requiredMessage="Ingresar e-mail"  validatorMessage="Email invalido">
                            <f:validateRegex pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
                    	</h:inputText>        
                    </td>
                    	
                    <td><h:message for="email" style="color:red" /></td>
                </tr>
                <tr>
                	<td><h:selectOneMenu id="sexo" value="#{registerBean.sexo}" class="form-control" required="true"
                		requiredMessage="Elegir sexo">
    					<f:selectItem itemValue="" itemLabel="--Sexo--" />
    					<f:selectItems value="#{generoBean.generos}" />
					</h:selectOneMenu></td>
					<td><h:message for="sexo" style="color:red" /></td>
                </tr>
                <tr>
                    <td><h:inputText id="dni" value="#{registerBean.dni}" class="form-control" a:placeholder="DNI"
                            required="true" requiredMessage="Ingresar el dni"  converterMessage="Ingresar solo digitos"/></td>
                    <td><h:message for="dni" style="color:red" /></td>
                </tr>
                <tr>
                    <td><h:inputText id="domicilio" value="#{registerBean.domicilio}" class="form-control" a:placeholder="Domicilio"
                            required="true" requiredMessage="Ingresar domicilio"/></td>
                    <td><h:message for="domicilio" style="color:red" /></td>
                </tr>
                <tr>
                	<td>
                		<h:inputText id="date" value="#{registerBean.fechaNac}" class="form-control" a:placeholder="DD/MM/YY"
                				required="true" requiredMessage="Ingresar fecha de nacimiento"  >
                			<f:convertDateTime type="date" pattern="d/M/yyyy"/>
                		</h:inputText>
                	</td>       
                </tr>
                <tr>
                    <td><h:commandButton value="Registrarse" class="btn btn-default" action="#{registerBean.register}" /></td>
                </tr>
            </table>
        </h:form>    
	</div>
</body>
</html>